(this["webpackJsonpspeedrun-pb-graph"]=this["webpackJsonpspeedrun-pb-graph"]||[]).push([[6],{209:function(e,t,a){e.exports={chartContainer:"GraphPage_chartContainer__3hmoX"}},214:function(e,t,a){"use strict";a.r(t);var r=a(46),n=a.n(r),c=a(52),o=a(12),u=a(47),s=a(0),i=a(2),l=a(19),d=a(210),p=(a(208),a(99)),v=a(13),b=a(22),f=function(e){var t=e%1,a=Math.floor(e)%60,r=Math.floor(e/60)%60,n=Math.floor(e/3600),c=t<.001?"":t.toFixed(3).slice(1),o=a<10?"0".concat(a):"".concat(a),u=r<10?"0".concat(r):"".concat(r),s=0===n?"":"".concat(n,":");return"".concat(s).concat(u,":").concat(o).concat(c)},m=a(55),j=function(e,t,a){return a?e?t+e:"":e?e+t:""},h=a(209),O=a.n(h),g=a(1),x=function(){var e=Object(u.a)(n.a.mark((function e(t,a){var r,s,i,d,v,b,f,m,h,O,g,x;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,s=t.categoryId,i=t.levelId,d=t.searchParams,e.next=3,Promise.all([a("".concat(l.a,"/categories/").concat(s,"?embed=game")),a("".concat(l.a,"/users/").concat(r)),a("".concat(l.a,"/runs?user=").concat(r).concat(j(i,"&level=",!0),"&category=").concat(s,"&max=200")),i?a("".concat(l.a,"/levels/").concat(i)):null,Promise.all(Object(c.a)(d.entries()).map(function(){var e=Object(u.a)(n.a.mark((function e(t){var r,c,u,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(o.a)(t,2),c=r[0],u=r[1],e.next=3,a("".concat(l.a,"/variables/").concat(c));case 3:return s=e.sent,e.abrupt("return",s.data.values.values[u].label);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))]);case 3:return v=e.sent,b=Object(o.a)(v,5),f=b[0],m=b[1],h=b[2],O=b[3],g=b[4],x=h.data.filter((function(e){return"rejected"!==e.status.status})).filter((function(e){return Object.entries(e.values).every((function(e){var t=Object(o.a)(e,2),a=t[0];return t[1]===d.get(a)}))})).map((function(e){return{date:p.DateTime.fromFormat(e.date,"yyyy-MM-dd",{zone:"UTC"}),time:e.times.primary_t,id:e.id}})).sort((function(e,t){return e.date===t.date?e.time<t.time?-1:1:e.date<t.date?-1:1})),e.abrupt("return",{gameName:f.data.game.data.names.international,categoryName:f.data.name,subcategoryString:g.join(", "),username:m.data.names.international,levelName:O?O.data.name:"",runs:x});case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t.default=function(){var e=Object(i.h)(),t=e.userId,a=e.categoryId,r=e.levelId,n=Object(s.useRef)(null),c=new URLSearchParams(Object(i.g)().search);if(!t)return Object(g.jsx)(b.a,{error:"No user id provided!"});if(!a)return Object(g.jsx)(b.a,{error:"No category id provided!"});var u=Object(m.a)(x,{userId:t,categoryId:a,levelId:r,searchParams:c}),l=Object(o.a)(u,3),p=l[0],h=l[1],y=l[2];if(y)return Object(g.jsx)(b.a,{error:y});if(h)return Object(g.jsx)(b.b,{});var k={labels:null===p||void 0===p?void 0:p.runs.map((function(e){return e.date})),datasets:[{label:"Time",data:null===p||void 0===p?void 0:p.runs.map((function(e){return e.time})),borderColor:"rgb(255,0,0)"}]},w={onClick:function(){if(n.current){var e=n.current.getActiveElements();if(e.length>0){var t=null===p||void 0===p?void 0:p.runs[e[0].index];window.location.href="https://speedrun.com/run/".concat(null===t||void 0===t?void 0:t.id)}}},responsive:!0,scales:{x:{type:"time",time:{tooltipFormat:"MMM d, yyyy"}},y:{ticks:{callback:function(e){return f(e)}}}},plugins:{tooltip:{callbacks:{label:function(e){return f(e.parsed.y)}}}}};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("h1",{children:[null===p||void 0===p?void 0:p.gameName,": ",j(null===p||void 0===p?void 0:p.levelName," "),null===p||void 0===p?void 0:p.categoryName," - ",j(null===p||void 0===p?void 0:p.subcategoryString," - "),null===p||void 0===p?void 0:p.username]}),Object(g.jsx)(v.b,{to:"/user/".concat(t),children:"Back to user"}),Object(g.jsx)("p",{children:Object(g.jsx)("b",{children:" Click a data-point to see the associated run's speedrun.com page!"})}),Object(g.jsx)("div",{className:O.a.chartContainer,children:Object(g.jsx)(d.a,{ref:n,type:"line",data:k,options:w})})]})}},55:function(e,t,a){"use strict";var r=a(46),n=a.n(r),c=a(47),o=a(12),u=a(56),s=a.n(u),i=a(0),l=a(19),d=a(21);t.a=function(e,t,a){var r=Object(i.useState)(null),u=Object(o.a)(r,2),p=u[0],v=u[1],b=Object(i.useState)(!0),f=Object(o.a)(b,2),m=f[0],j=f[1],h=Object(i.useState)(null),O=Object(o.a)(h,2),g=O[0],x=O[1],y=Object(i.useContext)(d.a);if(!y)return[null,!1,"calls to useFetcher() must be wrapped in a CacheProvider"];var k=y.isInCache,w=y.addOrUpdateCache,C=y.getFromCache,I=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.replace(l.a,""),!k(a)){e.next=3;break}return e.abrupt("return",C(a));case 3:return e.next=5,s()(t,{timeout:1e4});case 5:return r=e.sent,e.next=8,r.json();case 8:return c=e.sent,w(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var a=Object(c.a)(n.a.mark((function a(){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return j(!0),a.prev=1,a.next=4,e(t,I);case 4:r=a.sent,v(r),j(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),console.error(a.t0),x(a.t0.message);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(){return a.apply(this,arguments)}}();return Object(i.useEffect)((function(){N()}),null!==a&&void 0!==a?a:[]),[p,m,g]}}}]);
//# sourceMappingURL=6.5aac5a01.chunk.js.map