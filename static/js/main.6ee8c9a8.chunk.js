(this["webpackJsonpspeedrun-pb-graph"]=this["webpackJsonpspeedrun-pb-graph"]||[]).push([[0],{224:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(36),s=c.n(r),o=c(20),i=c(6),u=c(21),j=c.n(u),l=c(31),b=c(7),d=c(22),O=c.n(d),h=c(103),p=(c(216),c(12)),m=c(226),x=c(72),f=c(2),g=function(e){var t=e.error;return Object(f.jsxs)(x.a,{variant:"error",children:["An error occured: ",t]})},v=function(){return Object(f.jsx)(x.a,{variant:"info",children:"Loading..."})},y=function(e){var t=e%1,c=Math.floor(e)%60,a=Math.floor(e/60)%60,n=Math.floor(e/3600),r=0===t?"":t.toFixed(3).slice(1),s=c<10?"0".concat(c):"".concat(c),o=a<10?"0".concat(a):"".concat(a),i=0===n?"":"".concat(n,":");return"".concat(i).concat(o,":").concat(s).concat(r)},k=function(){var e=Object(i.g)(),t=e.userId,c=e.categoryId,n=Object(a.useRef)(null),r=Object(a.useState)(!0),s=Object(b.a)(r,2),u=s[0],d=s[1],x=Object(a.useState)(!1),k=Object(b.a)(x,2),S=k[0],w=k[1],I=Object(a.useState)(""),M=Object(b.a)(I,2),C=M[0],N=M[1],E=Object(a.useState)(""),F=Object(b.a)(E,2),P=F[0],B=F[1],D=Object(a.useState)(""),L=Object(b.a)(D,2),q=L[0],A=L[1],G=Object(a.useState)(""),H=Object(b.a)(G,2),J=H[0],R=H[1],z=Object(a.useState)([]),U=Object(b.a)(z,2),W=U[0],_=U[1],K=function(){var e=Object(l.a)(j.a.mark((function e(){var a,n,r,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([O()("".concat(T,"/categories/").concat(c,"?embed=game&callback=callback")),O()("".concat(T,"/users/").concat(t,"?callback=callback")),O()("".concat(T,"/runs?user=").concat(t,"&category=").concat(c,"&max=200&callback=callback"))]);case 3:return a=e.sent,e.next=6,Promise.all(a.map((function(e){return e.json()})));case 6:n=e.sent,r=Object(b.a)(n,3),s=r[0],o=r[1],i=r[2],B(s.data.game.data.names.international),A(s.data.name),R(o.data.names.international),d(!1),_(i.data.filter((function(e){return"rejected"!==e.status.status})).map((function(e){return{date:p.DateTime.fromFormat(e.date,"yyyy-MM-dd",{zone:"UTC"}),time:e.times.primary_t,id:e.id}})).sort((function(e,t){return e.date===t.date?e.time<t.time?-1:1:e.date<t.date?-1:1}))),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),w(!0),N(e.t0.message),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){K()}),[]),S)return Object(f.jsx)(g,{error:C});if(u)return Object(f.jsx)(v,{});var Q={labels:W.map((function(e){return e.date})),datasets:[{label:"Time",data:W.map((function(e){return e.time})),borderColor:"rgb(255,0,0)"}]},V={onClick:function(){var e=n.current.getActiveElements();if(e.length>0){var t=W[e[0].index];window.location.href="https://speedrun.com/run/".concat(t.id)}},responsive:!0,scales:{x:{type:"time",time:{tooltipFormat:"MMM d, yyyy"}},y:{ticks:{callback:function(e){return y(e)}}}},plugins:{tooltip:{callbacks:{label:function(e){return y(e.parsed.y)}}}}};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h1",{children:[P," : ",q," - ",J]}),Object(f.jsx)(o.b,{to:"/user/".concat(t),children:"Back to user"}),Object(f.jsx)("p",{children:Object(f.jsx)("b",{children:" Click a data-point to see the associated run's speedrun.com page!"})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(h.a,{ref:n,type:"line",data:Q,options:V})})]})},S=c(227),w=c(101),I=c(71),M=c(100),C=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),c=t[0],n=t[1],r=Object(i.f)();return Object(f.jsx)(I.a,{inline:!0,onSubmit:function(e){e.preventDefault(),r.push("/search/".concat(c))},children:Object(f.jsxs)(M.a,{children:[Object(f.jsx)(I.a.Control,{type:"search",name:"username",id:"searchInput",placeholder:"speedrun.com username",value:c,onChange:function(e){e.preventDefault(),n(e.target.value)}}),Object(f.jsx)(w.a,{type:"submit",children:Object(f.jsx)(S.a,{})})]})})},N=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{children:" Welcome to the Speedrun PB Grapher"}),Object(f.jsx)("h3",{children:" Enter your username to get started!"}),Object(f.jsx)(C,{})]})},E=function(){var e=Object(i.g)().id,t=Object(a.useState)(!0),c=Object(b.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!1),u=Object(b.a)(s,2),d=u[0],h=u[1],p=Object(a.useState)(""),m=Object(b.a)(p,2),x=m[0],y=m[1],k=Object(a.useState)(null),S=Object(b.a)(k,2),w=S[0],I=S[1],M=function(){var t=Object(l.a)(j.a.mark((function t(){var c,a,n,s,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([O()("".concat(T,"/users/").concat(e,"?callback=callback")),O()("".concat(T,"/users/").concat(e,"/personal-bests?embed=game,category&callback=callback"))]);case 3:return c=t.sent,t.next=6,Promise.all(c.map((function(e){return e.json()})));case 6:a=t.sent,n=Object(b.a)(a,2),s=n[0],o=n[1],r(!1),I({id:s.data.id,name:s.data.names.international,categories:o.data.filter((function(e){return"per-game"===e.category.data.type})).map((function(e){var t=e.game,c=e.category;return{gameName:t.data.names.international,gameId:t.data.id,categoryName:c.data.name,categoryId:c.data.id}}))}),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(0),h(!0),y(t.t0.message),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){M()}),[]),d?Object(f.jsx)(g,{error:x}):n?Object(f.jsx)(v,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h2",{children:["Categories for ",null===w||void 0===w?void 0:w.name]}),Object(f.jsx)("ul",{children:null===w||void 0===w?void 0:w.categories.map((function(e){return Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/graph/".concat(null===w||void 0===w?void 0:w.id,"/").concat(e.categoryId),children:[e.gameName,": ",e.categoryName]})},e.categoryId)}))})]})},F=c(102),P=c(230),B=c(229),D=(c(223),function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),c=t[0],n=t[1],r=Object(i.g)().query,s=Object(a.useState)(!1),u=Object(b.a)(s,2),d=u[0],h=u[1],p=Object(a.useState)(""),m=Object(b.a)(p,2),x=m[0],y=m[1],k=Object(a.useState)(!0),S=Object(b.a)(k,2),w=S[0],I=S[1],M=function(){var e=Object(l.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()("".concat(T,"/users?name=").concat(r),{timeout:2e4});case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n(c.data.slice(0,5).map((function(e){return{id:e.id,name:e.names.international}}))),I(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),h(!0),y("Error ".concat(x," occurred"));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){M()}),[]),d?Object(f.jsx)(g,{error:x}):w?Object(f.jsx)(v,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h3",{children:["Results for ",r,":"]}),Object(f.jsx)("ul",{children:c.length>0?c.map((function(e){var t=e.id,c=e.name;return Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/user/".concat(t),children:[c," "]})},t)})):Object(f.jsxs)("p",{children:["No users found. ",Object(f.jsx)(o.b,{to:"/",children:"Search again?"})]})})]})}),L=c(228),T="https://speedrun.com/api/v1",q=function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsxs)(P.a,{bg:"dark",expand:"lg",className:"mb-4",style:{justifyContent:"space-between"},children:[Object(f.jsxs)(B.a,{children:[Object(f.jsx)(P.a.Brand,{href:"#/",style:{color:"white"},children:"Speedrun PB Grapher"}),Object(f.jsx)(B.a.Link,{href:"#/",style:{color:"white"},children:"Home"})]}),Object(f.jsxs)(B.a,{className:"float-right",children:[Object(f.jsx)(C,{}),Object(f.jsx)(B.a.Link,{href:"https://github.com/Hurricane996/speedrun-pb-graph",children:Object(f.jsx)(L.a,{style:{color:"white"},className:"ml-auto"})})]})]}),Object(f.jsx)(F.a,{children:Object(f.jsxs)(i.c,{children:[Object(f.jsx)(i.a,{path:"/user/:id",exact:!0,children:Object(f.jsx)(E,{})}),Object(f.jsx)(i.a,{path:"/graph/:userId/:categoryId",exact:!0,children:Object(f.jsx)(k,{})}),Object(f.jsx)(i.a,{path:"/search/:query",exact:!0,children:Object(f.jsx)(D,{})}),Object(f.jsx)(i.a,{path:"/",exact:!0,children:Object(f.jsx)(N,{})}),Object(f.jsx)(i.a,{children:"404"})]})})]})};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(q,{})}),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.6ee8c9a8.chunk.js.map