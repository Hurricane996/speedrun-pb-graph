(this["webpackJsonpspeedrun-pb-graph"]=this["webpackJsonpspeedrun-pb-graph"]||[]).push([[0],{59:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(28),s=a.n(r),o=a(11),i=a(2),u=a(9),j=a.n(u),d=a(13),l=a(4),b=a(10),O=a.n(b),h=a(1),g=function(e){var t=e%1,a=Math.floor(e)%60,c=Math.floor(e/60)%60,n=Math.floor(e/3600),r=0===t?"":t.toFixed(3).slice(1),s=a<10?"0".concat(a):"".concat(a),o=c<10?"0".concat(c):"".concat(c),i=0===n?"":"".concat(n,":");return"".concat(i).concat(o,":").concat(s).concat(r)},p=function(){var e=Object(i.f)(),t=e.userId,a=e.categoryId,n=Object(c.useState)(!0),r=Object(l.a)(n,2),s=r[0],o=r[1],u=Object(c.useState)(!1),b=Object(l.a)(u,2),p=b[0],m=b[1],x=Object(c.useState)(""),v=Object(l.a)(x,2),S=v[0],y=v[1],w=Object(c.useState)(""),F=Object(l.a)(w,2),I=F[0],k=F[1],E=Object(c.useState)(""),C=Object(l.a)(E,2),N=C[0],P=C[1],L=Object(c.useState)(""),M=Object(l.a)(L,2),T=M[0],B=M[1],D=Object(c.useState)([]),J=Object(l.a)(D,2),G=J[0],U=J[1],_=function(){var e=Object(d.a)(j.a.mark((function e(){var c,n,r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([O.a.get("".concat(f,"/categories/").concat(a,"?embed=game")),O.a.get("".concat(f,"/users/").concat(t)),O.a.get("".concat(f,"/runs?user=").concat(t,"&category=").concat(a))]);case 3:c=e.sent,n=Object(l.a)(c,3),r=n[0],s=n[1],i=n[2],console.log(i),k(r.data.data.game.data.names.international),P(r.data.data.name),B(s.data.data.names.international),o(!1),U(i.data.data.filter((function(e){return"rejected"!==e.status.status})).map((function(e){return{date:new Date(e.date),time:e.times.primary_t}}))),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),m(!0),y(e.t0.message),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){_()}),[]),p?Object(h.jsxs)("p",{children:["Encountered error '",S,"'"]}):s?Object(h.jsx)("p",{children:"Loading..."}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h1",{children:[I," : ",N," - ",T]}),Object(h.jsx)("ul",{children:G.map((function(e){return Object(h.jsxs)("li",{children:[e.date.toUTCString()," : ",g(e.time)]})}))})]})},m=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)([]),s=Object(l.a)(r,2),i=s[0],u=s[1],b=function(){var e=Object(d.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(f,"/users?name=").concat(t));case 3:a=e.sent,c=a.data,console.log(c.data),u(c.data.slice(0,5).map((function(e){return{id:e.id,name:e.names.international}}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("form",{children:[Object(h.jsx)("label",{children:"Enter your username"}),Object(h.jsx)("input",{type:"text",name:"username",onChange:function(e){n(e.target.value),e.target.value.length>=1?b(e.target.value):u([])},value:a}),a.length>0?Object(h.jsx)("ul",{children:i.length>0?i.map((function(e){var t=e.id,a=e.name;return Object(h.jsx)("li",{children:Object(h.jsxs)(o.b,{to:"/user/".concat(t),children:[a," "]})})})):Object(h.jsx)("p",{children:"No users found"})}):Object(h.jsx)(h.Fragment,{})]})})},x=function(){var e=Object(i.f)().id,t=Object(c.useState)(!0),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),u=Object(l.a)(s,2),b=u[0],g=u[1],p=Object(c.useState)(""),m=Object(l.a)(p,2),x=m[0],v=m[1],S=Object(c.useState)(null),y=Object(l.a)(S,2),w=y[0],F=y[1],I=function(){var t=Object(d.a)(j.a.mark((function t(){var a,c,n,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([O.a.get("".concat(f,"/users/").concat(e)),O.a.get("".concat(f,"/users/").concat(e,"/personal-bests?embed=game,category"))]);case 3:a=t.sent,c=Object(l.a)(a,2),n=c[0],s=c[1],r(!1),console.log(s.data.data),F({id:n.data.data.id,name:n.data.data.names.international,categories:s.data.data.map((function(e){var t=e.game,a=e.category;return{gameName:t.data.names.international,gameId:t.data.id,categoryName:a.data.name,categoryId:a.data.id}}))}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),g(!0),v(t.t0.message),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){I()}),[]),b?Object(h.jsxs)("p",{children:["Error ",x," occured."]}):n?Object(h.jsx)("p",{children:"Loading..."}):(console.log(w),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:null===w||void 0===w?void 0:w.name}),Object(h.jsx)("ul",{children:null===w||void 0===w?void 0:w.categories.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsxs)(o.b,{to:"/graph/".concat(null===w||void 0===w?void 0:w.id,"/").concat(e.categoryId),children:[e.gameName,": ",e.categoryName]})})}))})]}))},f="https://speedrun.com/api/v1",v=function(){return Object(h.jsxs)(o.a,{children:[Object(h.jsx)("h1",{children:Object(h.jsx)(o.b,{to:"/",children:"Speedrun PB Grapher"})}),Object(h.jsx)("b",{children:"This site is still under construction"}),Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/user/:id",exact:!0,children:Object(h.jsx)(x,{})}),Object(h.jsx)(i.a,{path:"/graph/:userId/:categoryId",exact:!0,children:Object(h.jsx)(p,{})}),Object(h.jsx)(i.a,{path:"/",exact:!0,children:Object(h.jsx)(m,{})}),Object(h.jsx)(i.a,{children:"404"})]})]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,60)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),S()}},[[59,1,2]]]);
//# sourceMappingURL=main.8a756d64.chunk.js.map