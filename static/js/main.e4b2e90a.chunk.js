(this["webpackJsonpspeedrun-pb-graph"]=this["webpackJsonpspeedrun-pb-graph"]||[]).push([[0],{237:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(28),s=a.n(r),o=a(21),i=a(6),u=a(20),l=a.n(u),j=a(26),d=a(7),b=a(16),O=a.n(b),h=a(99),p=(a(229),a(12)),g=a(239),m=a(2),x=function(e){var t=e%1,a=Math.floor(e)%60,c=Math.floor(e/60)%60,n=Math.floor(e/3600),r=0===t?"":t.toFixed(3).slice(1),s=a<10?"0".concat(a):"".concat(a),o=c<10?"0".concat(c):"".concat(c),i=0===n?"":"".concat(n,":"),u="".concat(i).concat(o,":").concat(s).concat(r);return console.log(u),u},f={scales:{x:{type:"time",time:{tooltipFormat:"DD"}},y:{ticks:{callback:function(e,t,a){return x(e)}}}},plugins:{tooltip:{callbacks:{label:function(e){return x(e.parsed.y)}}}}},v=function(){var e=Object(i.f)(),t=e.userId,a=e.categoryId,n=Object(c.useState)(!0),r=Object(d.a)(n,2),s=r[0],u=r[1],b=Object(c.useState)(!1),x=Object(d.a)(b,2),v=x[0],y=x[1],S=Object(c.useState)(""),k=Object(d.a)(S,2),F=k[0],w=k[1],I=Object(c.useState)(""),E=Object(d.a)(I,2),L=E[0],M=E[1],T=Object(c.useState)(""),B=Object(d.a)(T,2),N=B[0],P=B[1],D=Object(c.useState)(""),G=Object(d.a)(D,2),J=G[0],U=G[1],_=Object(c.useState)([]),q=Object(d.a)(_,2),z=q[0],A=q[1],H=function(){var e=Object(j.a)(l.a.mark((function e(){var c,n,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([O.a.get("".concat(C,"/categories/").concat(a,"?embed=game")),O.a.get("".concat(C,"/users/").concat(t)),O.a.get("".concat(C,"/runs?user=").concat(t,"&category=").concat(a))]);case 3:c=e.sent,n=Object(d.a)(c,3),r=n[0],s=n[1],o=n[2],console.log(o),M(r.data.data.game.data.names.international),P(r.data.data.name),U(s.data.data.names.international),u(!1),A(o.data.data.filter((function(e){return"rejected"!==e.status.status})).map((function(e){return{date:p.DateTime.fromFormat(e.date,"yyyy-MM-dd"),time:e.times.primary_t}}))),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),y(!0),w(e.t0.message),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();if(Object(c.useEffect)((function(){H()}),[]),v)return Object(m.jsxs)("p",{children:["Encountered error '",F,"'"]});if(s)return Object(m.jsx)("p",{children:"Loading..."});var K={labels:z.map((function(e){return e.date})),datasets:[{label:"Time",data:z.map((function(e){return e.time})),borderColor:"rgb(255,0,0)"}]};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h1",{children:[L," : ",N," - ",J]}),Object(m.jsx)(o.b,{to:"/user/".concat(t),children:"Back to user"}),Object(m.jsx)(g.a,{children:Object(m.jsx)(h.a,{type:"line",data:K,options:f,width:600,height:250})})]})},y=a(241),S=null,k=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),s=Object(d.a)(r,2),i=s[0],u=s[1],b=Object(c.useState)([]),h=Object(d.a)(b,2),p=h[0],g=h[1],x=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S&&S.cancel(),e.prev=1,S=O.a.CancelToken.source(),e.next=5,O.a.get("".concat(C,"/users?name=").concat(t),{cancelToken:S.token});case 5:a=e.sent,c=a.data,console.log(c.data),g(c.data.slice(0,5).map((function(e){return{id:e.id,name:e.names.international}}))),u(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsxs)(y.a.Group,{children:[Object(m.jsx)(y.a.Label,{children:"Enter your speedrun.com username"}),Object(m.jsx)(y.a.Control,{type:"search",name:"username",onChange:function(e){n(e.target.value),u(!0),e.target.value.length>=1?x(e.target.value):g([])},value:a})]}),i||0==a.length?0!=a.length?Object(m.jsx)("p",{children:"Loading..."}):Object(m.jsx)(m.Fragment,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{children:"Users:"}),Object(m.jsx)("ul",{children:p.length>0?p.map((function(e){var t=e.id,a=e.name;return Object(m.jsx)("li",{children:Object(m.jsxs)(o.b,{to:"/user/".concat(t),children:[a," "]})})})):Object(m.jsx)("p",{children:"No users found"})})]})]})})},F=function(){var e=Object(i.f)().id,t=Object(c.useState)(!0),a=Object(d.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),u=Object(d.a)(s,2),b=u[0],h=u[1],p=Object(c.useState)(""),g=Object(d.a)(p,2),x=g[0],f=g[1],v=Object(c.useState)(null),y=Object(d.a)(v,2),S=y[0],k=y[1],F=function(){var t=Object(j.a)(l.a.mark((function t(){var a,c,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([O.a.get("".concat(C,"/users/").concat(e)),O.a.get("".concat(C,"/users/").concat(e,"/personal-bests?embed=game,category"))]);case 3:a=t.sent,c=Object(d.a)(a,2),n=c[0],s=c[1],r(!1),console.log(s.data.data),k({id:n.data.data.id,name:n.data.data.names.international,categories:s.data.data.map((function(e){var t=e.game,a=e.category;return{gameName:t.data.names.international,gameId:t.data.id,categoryName:a.data.name,categoryId:a.data.id}}))}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),h(!0),f(t.t0.message),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){F()}),[]),b?Object(m.jsxs)("p",{children:["Error ",x," occured."]}):n?Object(m.jsx)("p",{children:"Loading..."}):(console.log(S),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:null===S||void 0===S?void 0:S.name}),Object(m.jsx)("ul",{children:null===S||void 0===S?void 0:S.categories.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsxs)(o.b,{to:"/graph/".concat(null===S||void 0===S?void 0:S.id,"/").concat(e.categoryId),children:[e.gameName,": ",e.categoryName]})})}))})]}))},w=a(98),I=a(240),C=(a(236),"https://speedrun.com/api/v1"),E=function(){return Object(m.jsxs)(o.a,{children:[Object(m.jsx)(I.a,{bg:"dark",children:Object(m.jsx)(I.a.Brand,{href:"/",children:Object(m.jsx)("h6",{style:{color:"white"},children:"Speedrun PB Grapher"})})}),Object(m.jsx)(w.a,{children:Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{path:"/user/:id",exact:!0,children:Object(m.jsx)(F,{})}),Object(m.jsx)(i.a,{path:"/graph/:userId/:categoryId",exact:!0,children:Object(m.jsx)(v,{})}),Object(m.jsx)(i.a,{path:"/",exact:!0,children:Object(m.jsx)(k,{})}),Object(m.jsx)(i.a,{children:"404"})]})})]})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,242)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(E,{})}),document.getElementById("root")),L()}},[[237,1,2]]]);
//# sourceMappingURL=main.e4b2e90a.chunk.js.map